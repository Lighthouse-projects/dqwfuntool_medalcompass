# UI設計書

## 概要

本ドキュメントは、MedalCompass（dqwfunメダルコンパス）のUI/UX設計を記載しています。React Native + Expoで開発されるモバイルアプリのUI仕様、画面構成、デザイン方針を定義します。

---

## デザイン方針

### 基本コンセプト
- **超シンプルなUI/UX**: 一般的なマップアプリにメダルが表示され、登録ボタンのみの最小限UI
- **歩きながら使える**: 大きなボタン、タップしやすいUI要素
- **直感的な操作**: 説明不要で使える操作性
- **マップ中心**: 画面の大部分はマップ表示、UI要素は最小限

### デザイン原則
1. **シンプル**: 機能を絞り込み、迷わせない
2. **わかりやすい**: 視覚的に理解しやすいアイコンと色使い
3. **安全**: 歩きながらでも操作しやすい大きなボタン
4. **快適**: ストレスのない応答速度とアニメーション

---

## カラーパレット

### プライマリカラー
- **メインカラー**: `#50C878` (エメラルドグリーン) - ボタン、アクティブ要素
- **アクセントカラー**: `#FFC107` (黄色) - 他人のメダル
- **シルバーカラー**: `#9E9E9E` (銀色) - 自分のメダル

### セマンティックカラー
- **成功**: `#4CAF50` (緑) - 成功メッセージ
- **エラー**: `#F44336` (赤) - エラーメッセージ、削除ボタン
- **警告**: `#FF9800` (オレンジ) - 警告メッセージ
- **情報**: `#2196F3` (青) - 情報メッセージ

### 背景・テキストカラー
- **背景**: `#FFFFFF` (白)
- **セカンダリ背景**: `#F5F5F5` (ライトグレー)
- **テキストプライマリ**: `#212121` (ダークグレー)
- **テキストセカンダリ**: `#757575` (グレー)
- **ボーダー**: `#E0E0E0` (ライトグレー)

---

## タイポグラフィ

### フォント
- **iOS**: San Francisco（システムデフォルト）
- **Android**: Roboto（システムデフォルト）
- **共通**: システムフォントを使用（React Native標準）

### フォントサイズ
- **特大**: 24px - 画面タイトル
- **大**: 18px - セクションタイトル
- **中**: 16px - ボタンテキスト、本文
- **小**: 14px - サブテキスト、キャプション
- **極小**: 12px - 注釈、補足情報

### フォントウェイト
- **Bold (700)**: 見出し、ボタン
- **Medium (500)**: 強調テキスト
- **Regular (400)**: 本文、通常テキスト

---

## アイコン

### 使用アイコンライブラリ
- **Expo Vector Icons**: `@expo/vector-icons`
- **アイコンセット**: MaterialIcons, Ionicons

### 主要アイコン
| 機能 | アイコン名 | サイズ | 色 |
|------|-----------|--------|-----|
| 現在地 | `my-location` (MaterialIcons) | 32px | `#1E88E5` |
| ズームイン | `add` (MaterialIcons) | 28px | `#1E88E5` |
| ズームアウト | `remove` (MaterialIcons) | 28px | `#1E88E5` |
| 設定 | `settings` (MaterialIcons) | 24px | `#757575` |
| ログアウト | `logout` (MaterialIcons) | 24px | `#757575` |
| 削除 | `delete` (MaterialIcons) | 24px | `#F44336` |
| 通報 | `flag` (MaterialIcons) | 24px | `#FF9800` |
| メダル | `circle` (MaterialIcons) | 40px | 状態による |

---

## 画面一覧

| 画面ID | 画面名 | 説明 |
|--------|--------|------|
| SC001 | ログイン画面 | メール/パスワード認証 |
| SC002 | 新規登録画面 | ユーザー登録 |
| SC003 | パスワードリセット画面 | パスワード再設定 |
| SC004 | マップ画面 | メイン画面（メダル表示・登録） |
| SC005 | 設定画面 | アカウント管理、ログアウト |

---

## SC001: ログイン画面

### 画面レイアウト

```
┌──────────────────────────────────┐
│                                  │
│                                  │
│     dqwfunメダルコンパス         │  ← タイトル（24px、Bold）
│                                  │
│                                  │
│  ┌────────────────────────────┐ │
│  │ メールアドレス              │ │  ← ラベル（14px）
│  └────────────────────────────┘ │
│  ┌────────────────────────────┐ │
│  │ example@email.com          │ │  ← 入力フィールド（16px）
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │ パスワード                  │ │  ← ラベル（14px）
│  └────────────────────────────┘ │
│  ┌────────────────────────────┐ │
│  │ ••••••••                   │ │  ← パスワード入力（16px）
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │       ログイン             │ │  ← プライマリボタン（高さ50px）
│  └────────────────────────────┘ │
│                                  │
│       新規登録はこちら           │  ← リンク（14px、青）
│     パスワードを忘れた方         │  ← リンク（14px、青）
│                                  │
└──────────────────────────────────┘
```

### UI要素詳細

**タイトル**
- テキスト: "dqwfunメダルコンパス"
- フォントサイズ: 24px
- フォントウェイト: Bold
- 色: `#212121`
- 配置: 中央揃え

**入力フィールド**
- 高さ: 50px
- 背景色: `#FFFFFF`
- ボーダー: 1px solid `#E0E0E0`
- ボーダー半径: 8px
- パディング: 16px
- フォントサイズ: 16px
- プレースホルダー色: `#BDBDBD`

**ログインボタン**
- 高さ: 50px
- 背景色: `#1E88E5`
- テキスト色: `#FFFFFF`
- フォントサイズ: 16px
- フォントウェイト: Bold
- ボーダー半径: 8px
- タップ時: 透明度80%

**リンクテキスト**
- フォントサイズ: 14px
- 色: `#1E88E5`
- 下線: なし
- タップ時: 下線表示

### 入力バリデーション
- **メールアドレス**: メール形式チェック（正規表現）
- **パスワード**: 未入力チェック
- **エラー表示**: 入力フィールド下に赤文字で表示

### エラーメッセージ
- "有効なメールアドレスを入力してください"
- "パスワードを入力してください"
- "メールアドレスまたはパスワードが正しくありません"
- "通信エラーが発生しました。しばらくしてから再度お試しください"

### ログイン情報記憶機能UI

**チェックボックス追加（F007）:**

```
┌──────────────────────────────────┐
│                                  │
│     dqwfunメダルコンパス         │
│                                  │
│  ┌────────────────────────────┐ │
│  │ メールアドレス              │ │
│  └────────────────────────────┘ │
│  ┌────────────────────────────┐ │
│  │ example@email.com          │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │ パスワード                  │ │
│  └────────────────────────────┘ │
│  ┌────────────────────────────┐ │
│  │ ••••••••                   │ │
│  └────────────────────────────┘ │
│                                  │
│  ☑ ログイン情報を記憶する        │  ← 新規追加
│                                  │
│  ┌────────────────────────────┐ │
│  │       ログイン             │ │
│  └────────────────────────────┘ │
│                                  │
│       新規登録はこちら           │
│     パスワードを忘れた方         │
│                                  │
└──────────────────────────────────┘
```

**チェックボックス仕様:**
- サイズ: 24px × 24px
- 位置: パスワード入力欄とログインボタンの間（マージン上下16px）
- デフォルト状態: OFF（セキュリティ上の理由）
- 未チェック: ボーダーのみ（`#757575`）
- チェック済み: 背景`#1E88E5`、白チェックマーク
- ラベル: "ログイン情報を記憶する"（14px、`#212121`）
- タップ領域: 44px × 44px（アクセシビリティ対応）

**動作:**
- チェックON + ログイン成功 → メールアドレス・パスワードを保存
- チェックOFF + ログイン成功 → 何もしない
- 次回ログイン画面表示時 → 保存情報がある場合、自動入力 + チェックON

---

## SC002: 新規登録画面

### 画面レイアウト

```
┌──────────────────────────────────┐
│  [<] 新規登録                    │  ← ヘッダー
├──────────────────────────────────┤
│                                  │
│  ┌────────────────────────────┐ │
│  │ メールアドレス              │ │
│  └────────────────────────────┘ │
│  ┌────────────────────────────┐ │
│  │ example@email.com          │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │ パスワード（8文字以上）     │ │
│  └────────────────────────────┘ │
│  ┌────────────────────────────┐ │
│  │ ••••••••                   │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │ パスワード（確認）          │ │
│  └────────────────────────────┘ │
│  ┌────────────────────────────┐ │
│  │ ••••••••                   │ │
│  └────────────────────────────┘ │
│                                  │
│  ☐ 利用規約に同意する          │  ← チェックボックス
│                                  │
│  ┌────────────────────────────┐ │
│  │         登録               │ │  ← プライマリボタン
│  └────────────────────────────┘ │
│                                  │
└──────────────────────────────────┘
```

### UI要素詳細

**ヘッダー**
- 高さ: 56px
- 背景色: `#FFFFFF`
- ボーダー下: 1px solid `#E0E0E0`
- 戻るボタン: 左上（`<` アイコン）
- タイトル: "新規登録"（18px、Bold）

**チェックボックス**
- サイズ: 24px × 24px
- 未チェック: ボーダーのみ（`#757575`）
- チェック済み: 背景`#1E88E5`、白チェックマーク
- ラベル: "利用規約に同意する"（14px）
- リンク: "利用規約"部分をタップ可能（青）

**登録ボタン**
- チェックボックス未チェック時: 無効化（グレーアウト）
- 有効化条件: 全入力項目が有効 + チェックボックスON

### 入力バリデーション
- **メールアドレス**: メール形式チェック
- **パスワード**: 8文字以上
- **パスワード確認**: パスワードと一致
- **利用規約**: チェックボックスON

### エラーメッセージ
- "有効なメールアドレスを入力してください"
- "パスワードは8文字以上で入力してください"
- "パスワードが一致しません"
- "このメールアドレスは既に登録されています"

---

## SC003: パスワードリセット画面

### 画面レイアウト

```
┌──────────────────────────────────┐
│  [<] パスワードリセット          │
├──────────────────────────────────┤
│                                  │
│  登録済みのメールアドレスを      │
│  入力してください。              │
│  パスワードリセット用のリンクが  │
│  送信されます。                  │
│                                  │
│  ┌────────────────────────────┐ │
│  │ メールアドレス              │ │
│  └────────────────────────────┘ │
│  ┌────────────────────────────┐ │
│  │ example@email.com          │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │        送信                │ │
│  └────────────────────────────┘ │
│                                  │
└──────────────────────────────────┘
```

### UI要素詳細

**説明文**
- フォントサイズ: 14px
- 色: `#757575`
- 行間: 1.5
- 配置: 左揃え

**送信ボタン**
- タップ後: ローディング表示（スピナー）
- 成功時: トースト表示「メールを送信しました」
- 画面: ログイン画面に自動遷移（3秒後）

---

## SC004: マップ画面（メイン画面）

### 画面レイアウト

```
┌──────────────────────────────────┐
│  dqwfunメダルコンパス    [設定]  │  ← ヘッダー（56px）
├──────────────────────────────────┤
│                                  │
│                                  │
│         マップ表示領域            │
│         （全画面表示）            │
│                                  │
│    ● 黄色マーカー（他人）        │
│    ● 銀色マーカー（自分）        │
│                                  │
│                                  │
│  [○]                             │  ← 現在地ボタン（左下）
│                        [+]       │  ← ズームイン（右下）
│                        [-]       │  ← ズームアウト（右下）
│                                  │
├──────────────────────────────────┤
│     📍 メダルを登録              │  ← 登録ボタン（固定、56px）
└──────────────────────────────────┘
```

### UI要素詳細

**ヘッダー**
- 高さ: 56px
- 背景色: `#FFFFFF`（半透明80%）
- タイトル: "dqwfunメダルコンパス"（18px、Bold）
- 設定アイコン: 右上（24px、`#757575`）

**マップ表示領域**
- 全画面表示（ヘッダーと登録ボタン以外）
- マップライブラリ: `react-native-maps`
- 初期表示: ユーザーの現在地中心
- ズームレベル: 約1km範囲

**メダルマーカー**
- **自分のメダル（銀色）**:
  - 色: `#9E9E9E`
  - サイズ: 直径40px
  - 影: 軽い影効果
  - タップ時: 吹き出し表示

- **他人のメダル（黄色）**:
  - 色: `#FFC107`
  - サイズ: 直径40px
  - 影: 軽い影効果
  - タップ時: 吹き出し表示

**現在地ボタン**
- 位置: 画面左下（マージン: 16px）
- サイズ: 48px × 48px
- 背景色: `#FFFFFF`
- アイコン: `my-location`（32px、`#1E88E5`）
- 影: `shadowOpacity: 0.2`
- ボーダー半径: 24px（円形）

**ズームボタン**
- 位置: 画面右下（マージン: 16px）
- サイズ: 48px × 48px（各ボタン）
- 背景色: `#FFFFFF`
- アイコン: `+` / `-`（28px、`#1E88E5`）
- 影: `shadowOpacity: 0.2`
- ボーダー半径: 24px（円形）
- 間隔: 8px

**登録ボタン**
- 位置: 画面最下部（固定）
- 高さ: 56px
- 幅: 画面幅100%
- 背景色: `#1E88E5`
- テキスト: "📍 メダルを登録"（16px、Bold、白）
- 影: 上部に軽い影
- タップ時: 透明度80% + 軽い振動フィードバック

### メダル吹き出し（自分のメダル）

```
┌─────────────────────────┐
│ 登録日時: 2025-11-13    │
│ 14:30                   │
│                         │
│  ┌───────────────────┐  │
│  │   🗑️ 削除         │  │  ← 削除ボタン（赤）
│  └───────────────────┘  │
└─────────────────────────┘
```

**吹き出しUI**
- 背景色: `#FFFFFF`
- ボーダー: 1px solid `#E0E0E0`
- ボーダー半径: 8px
- パディング: 12px
- 影: `shadowOpacity: 0.15`

**削除ボタン**
- 高さ: 40px
- 背景色: `#F44336`
- テキスト色: `#FFFFFF`
- フォントサイズ: 14px
- ボーダー半径: 6px

### メダル吹き出し（他人のメダル）

```
┌─────────────────────────┐
│ 登録日時: 2025-11-13    │
│ 14:30                   │
│ 通報数: 3件             │  ← 3件以上の場合のみ表示
│                         │
│  ┌───────────────────┐  │
│  │ 🚩 誤メダルとして  │  │  ← 通報ボタン（オレンジ）
│  │    通報            │  │
│  └───────────────────┘  │
└─────────────────────────┘
```

**通報数表示**
- 表示条件: 3件以上の場合のみ
- フォントサイズ: 14px
- 色: `#FF9800`（警告色）

**通報ボタン**
- 高さ: 40px
- 背景色: `#FF9800`
- テキスト色: `#FFFFFF`
- フォントサイズ: 14px
- ボーダー半径: 6px
- 通報済みの場合: グレーアウト、テキスト"通報済み"

### 確認ダイアログ（削除）

```
┌─────────────────────────────┐
│                             │
│     メダルを削除            │  ← タイトル（18px、Bold）
│                             │
│  このメダルを削除しますか？ │  ← メッセージ（14px）
│  削除後は復元できません。   │
│                             │
│  ┌──────────┐ ┌──────────┐ │
│  │キャンセル│ │  削除    │ │  ← ボタン
│  └──────────┘ └──────────┘ │
└─────────────────────────────┘
```

**ダイアログUI**
- 背景色: `#FFFFFF`
- ボーダー半径: 12px
- パディング: 24px
- 影: `shadowOpacity: 0.3`
- 背景オーバーレイ: 黒50%透過

**キャンセルボタン**
- 背景色: 透明
- テキスト色: `#757575`
- ボーダー: 1px solid `#E0E0E0`

**削除ボタン**
- 背景色: `#F44336`
- テキスト色: `#FFFFFF`

### 確認ダイアログ（通報）

```
┌─────────────────────────────┐
│                             │
│  誤メダルとして通報         │
│                             │
│  このメダルを誤メダルとして │
│  通報しますか？             │
│  通報は取り消せません。     │
│                             │
│  ┌──────────┐ ┌──────────┐ │
│  │キャンセル│ │ 通報する │ │
│  └──────────┘ └──────────┘ │
└─────────────────────────────┘
```

**通報するボタン**
- 背景色: `#FF9800`
- テキスト色: `#FFFFFF`

### トースト通知

```
┌───────────────────────┐
│  ✅ 登録しました      │  ← 成功メッセージ
└───────────────────────┘

┌───────────────────────┐
│  ✅ 削除しました      │
└───────────────────────┘

┌───────────────────────┐
│  ✅ 通報しました      │
└───────────────────────┘
```

**トーストUI**
- 位置: 画面下部（登録ボタンの上）
- 背景色:
  - 成功: `#4CAF50`（緑）
  - エラー: `#F44336`（赤）
- テキスト色: `#FFFFFF`
- フォントサイズ: 14px
- パディング: 12px 20px
- ボーダー半径: 24px
- 表示時間: 3秒
- アニメーション: フェードイン/アウト

---

## SC005: 設定画面

### 画面レイアウト

```
┌──────────────────────────────────┐
│  [<] 設定                        │  ← ヘッダー
├──────────────────────────────────┤
│                                  │
│  【アカウント】                  │
│                                  │
│  ┌────────────────────────────┐ │
│  │ メールアドレス              │ │
│  │ user@example.com           │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │ パスワード変更 >            │ │
│  └────────────────────────────┘ │
│                                  │
│  【情報】                        │
│                                  │
│  ┌────────────────────────────┐ │
│  │ 利用規約 >                  │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │ プライバシーポリシー >      │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │ バージョン情報              │ │
│  │ v1.0.0                     │ │
│  └────────────────────────────┘ │
│                                  │
│  ┌────────────────────────────┐ │
│  │    🚪 ログアウト           │ │  ← ログアウトボタン（赤）
│  └────────────────────────────┘ │
│                                  │
└──────────────────────────────────┘
```

### UI要素詳細

**セクションヘッダー**
- フォントサイズ: 14px
- 色: `#757575`
- フォントウェイト: Medium
- パディング: 16px 16px 8px

**リスト項目**
- 高さ: 56px
- 背景色: `#FFFFFF`
- ボーダー下: 1px solid `#E0E0E0`
- パディング: 16px
- タップ時: 背景色 `#F5F5F5`

**ログアウトボタン**
- 高さ: 50px
- 背景色: `#F44336`
- テキスト色: `#FFFFFF`
- フォントサイズ: 16px
- フォントウェイト: Bold
- ボーダー半径: 8px
- マージン: 24px 16px

---

## レスポンシブ対応

### 画面サイズ対応
- **iPhone SE (375px幅)**: 基準サイズ
- **iPhone Pro Max (414px幅)**: ボタン・マージン比例拡大
- **Android Small (360px幅)**: 最小サポートサイズ
- **Tablet (768px以上)**: 将来対応（現在は対象外）

### Safe Area対応
- iOS: ノッチ・ホームインジケーター考慮
- Android: ステータスバー・ナビゲーションバー考慮
- ライブラリ: `react-native-safe-area-context`

---

## アニメーション・トランジション

### 画面遷移
- **モーダル表示**: スライドアップ（300ms）
- **画面戻る**: スライドダウン（300ms）
- **タブ切り替え**: フェード（200ms）

### UI要素アニメーション
- **ボタンタップ**: スケール縮小 0.95（100ms）
- **トースト表示**: フェードイン（200ms）
- **トースト非表示**: フェードアウト（200ms）
- **ダイアログ表示**: スケール 0 → 1（300ms）
- **マーカーアニメーション**: ドロップイン（400ms）

### ローディングアニメーション
- **スピナー**: 円形インジケーター（青）
- **位置**: 画面中央
- **サイズ**: 48px × 48px
- **背景オーバーレイ**: 白50%透過

---

## アクセシビリティ

### 基本対応
- **タップ領域**: 最小44px × 44px（iOS HIG準拠）
- **コントラスト比**: WCAG AA準拠（4.5:1以上）
- **フォントスケーリング**: システム設定に追従

### 特別対応
- **現時点では対象外**: スクリーンリーダー、VoiceOver等は将来対応

---

## ダークモード

### 対応方針
- **現時点では非対応**: ライトモードのみ
- **将来対応予定**: 需要に応じて検討

---

## まとめ

MedalCompassのUI設計は以下の特徴があります：

✅ **シンプルで直感的**: マップ中心、最小限のUI要素
✅ **歩きながら使える**: 大きなボタン、タップしやすいデザイン
✅ **視認性が高い**: 明確な色分け（銀色=自分、黄色=他人）
✅ **快適な操作感**: スムーズなアニメーション、適切なフィードバック
✅ **iOS/Android対応**: クロスプラットフォーム対応のUI設計

この設計により、初めて使うユーザーでも迷わず操作でき、ストレスのないUXを提供します。
